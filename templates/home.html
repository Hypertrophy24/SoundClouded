{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}Home | SoundClouded{% endblock %}

{% block content %}
<div class="container mt-4 text-center" style="color: #c0bebe; background-color: #333; min-height: 100vh; padding: 20px;">
    <h1 style="color: #FF7F50; text-shadow: 1px 1px 2px black;">Welcome to SoundClouded</h1>
    {% if user.is_authenticated %}
        <p style="text-shadow: 1px 1px 2px black;">Welcome back, <strong>{{ user.username }}</strong>!</p>
        <p style="text-shadow: 1px 1px 2px black;">Your profile says you're {{ user.age }} years old.</p>
        <form action="{% url 'account_logout' %}" method="post">
            {% csrf_token %}
            <button class="btn btn-secondary mt-2" type="submit">Log Out</button>
        </form>
    {% else %}
        <p style="color: #c0bebe; text-shadow: 1px 1px 2px black;">Please log in to access personalized music recommendations.</p>
        <a href="{% url 'account_login' %}" class="btn btn-outline-secondary me-2">Log In</a>
        <a href="{% url 'account_signup' %}" class="btn btn-outline-secondary">Sign Up</a>
    {% endif %}

    <hr style="border-color: #FF7F50;">

    <!-- Placeholder for Weather Search Feature -->
    <div class="mt-4" style="color: #c0bebe;">
        <h3 style="color: #FF7F50; text-shadow: 1px 1px 2px black;">Get Music Recommendations Based on the Weather</h3>
        <p style="text-shadow: 1px 1px 2px black;">Enter your city to see the perfect playlist for todayâ€™s weather.</p>
        <form method="get" action="#">
            <input type="text" name="city" placeholder="Enter city" class="form-control mb-3" style="max-width: 300px; margin: auto;">
            <button type="submit" class="btn btn-primary" style="background-color: #FF7F50; border: none;">Search</button>
        </form>
    </div>

    <div class="playlist-container">
        <h1>Current Weather: {{ weather_description }}</h1>
        <p>Selected Genre: <strong>{{ genre }}</strong></p>
        <h2>Select a Playlist to Play</h2>
        {% for playlist in playlists %}
            <div class="playlist">
                <h2>{{ playlist.name }}</h2>
                {% if playlist.image %}
                    <img src="{{ playlist.image }}" alt="{{ playlist.name }}" width="200">
                {% endif %}
                <iframe src="{{ playlist.embed_url }}" allowtransparency="true" allow="encrypted-media"></iframe>
            </div>
        {% endfor %}
    </div>
    
</div>
{% endblock %}